# Unity游戏客户端设置指南

本文档将指导您如何在Unity项目中设置并使用`UnityGameClient.cs`脚本，以与游戏服务器进行联调。

## 前置条件

1. 确保游戏服务器已在运行（端口9090）
2. 已安装Unity（推荐2019.4或更高版本）

## 步骤一：导入脚本

1. 在Unity项目中创建一个新的C#脚本，命名为`UnityGameClient.cs`
2. 复制`UnityGameClient.cs`文件的全部内容到Unity中

## 步骤二：创建UI界面

1. 在Unity场景中创建以下UI元素：
   - 一个`Canvas`对象
   - 一个`Text`组件（用于显示消息）
   - 一个`InputField`组件（用于输入命令）
   - 一个`Button`组件（可选，用于发送消息）
   - 一个`ScrollRect`组件包裹`Text`，并添加`Mask`组件以实现滚动效果

2. 设置UI布局
   - 将`Text`组件放置在屏幕上方，用于显示聊天记录
   - 将`InputField`组件放置在屏幕下方，用于输入命令
   - 将`Button`组件放置在`InputField`旁边

## 步骤三：配置脚本

1. 创建一个空的GameObject，命名为`GameClient`
2. 将`UnityGameClient.cs`脚本附加到该GameObject上
3. 在Inspector面板中，将创建的UI组件拖放到脚本的对应字段：
   - `messageText`: 拖入Text组件
   - `inputField`: 拖入InputField组件

## 步骤四：设置按钮事件

1. 选择发送按钮
2. 在Inspector面板中，点击`On Click()`旁边的`+`按钮
3. 拖入`GameClient` GameObject
4. 从下拉菜单中选择`UnityGameClient.SendFromInputField`

## 步骤五：网络配置

默认配置使用以下连接参数：
- 主机：localhost（127.0.0.1）
- 端口：9090

如果需要修改，请在脚本的`Start()`方法中修改`host`和`port`变量。

## 键盘控制说明

- **W/A/S/D**: 发送上下左右移动命令
- **空格键**: 发送输入框中的消息
- **ESC**: 退出客户端

## 可用命令

与原始Java客户端相同，服务器支持的命令包括：
- `/help`: 显示帮助信息
- `/quit`: 退出客户端
- `/move [方向]`: 移动命令（上下左右）
- 其他自定义命令（根据服务器实现）

## 联调测试

1. 确保游戏服务器已启动（端口9090）
2. 运行Unity场景
3. 检查客户端是否成功连接到服务器
4. 尝试使用键盘操作和输入命令与服务器交互

## 故障排除

- **连接失败**: 检查服务器是否正在运行，以及端口配置是否正确
- **消息发送失败**: 确保网络连接正常
- **UI问题**: 检查UI组件是否正确引用
- **线程问题**: Unity不允许在非主线程修改UI，脚本已通过消息队列机制处理

## 高级功能

- 您可以扩展脚本以添加更多游戏特定功能
- 可以实现玩家状态同步、游戏对象移动等
- 考虑添加断线重连机制以提高稳定性

## 注意事项

1. 在构建发布版本时，确保修改`host`变量指向实际的服务器IP地址
2. 考虑添加网络延迟处理和状态同步机制
3. 对于生产环境，建议实现更完善的错误处理和重连逻辑

祝您联调顺利！